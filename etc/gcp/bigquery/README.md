## 빅쿼리

#### 1. 개념 및 특징

```
1) 빅쿼리란?
빅쿼리는 페타바이트 급의 데이터 저장 및 분석용 클라우드 서비스이다.
8800개의 CPU와 3600개의 디스크를 사용하는 대규모 인프라를 통해 1000억개의 레코드에 대한 질의를 약 30초에 수행하며, 가격도 저렴하다.

2) 특징
서버리스, NoOps, 실시간 분석, 자동 고가용성, 표준 SQL, 저장소와 컴퓨팅 분리, 세분화된 액세스 제어, 자동 백업 및 간편한 복원, 분산 저장, 데이터 전송 서비스, 빅데이터 생태계 통합, 데이터 암호화 및 보안, 프로그래매틱 상호작용, 배치/스트리밍 모두 지원, REST API 제공, stackdriver를 통한 모니터링 및 로깅, 쿼리당 과금 등등 특징도 참 많다. 


(1) 빅데이터에 SQL 쿼리 (병렬)
수 초 내에 테라바이트를 읽는 방법은 어떤 것이 있을까?
1. 많은 데이터를 건너뛴다. 던질 질문을 미리 알고 있을 때 좋은 방법이다. 데이터를 미리 집계하거나 접근해야 하는 열의 색인을 생성할 수 있다. 하지만 다른 질문을 던지거나 다른 방법으로 질문하고 싶을 때는 풀스캔하여야 한다.
2. 비싼 H/W
3. 병렬 수행.

DB 쿼리 성능의 주요 제약사항 중 하나는 쿼리의 순차적인 실행이다. 대부분의 DB는 다수의 프로세서를 사용할 수 있지만, 하나의 쿼리를 위해 다수의 프로세서를 사용하지는 않는다. 다수의 쿼리를 한번에 수행하기 위해(batch 등) 병렬성을 활용하기는 한다. 하나의 쿼리를 병렬로 실행한다고 해도 DB 성능은 디스크 I/O 속도에 의해 여전히 제한될 수 있다. 하나의 디스크에 데이터를 저장하여 순차적으로 읽는 것보다 다수의 위치에서 디스크를 병렬로 읽는게 더 느리다. 과거 구글은 이 문제를 맵리듀스를 통해 해결하였다.

- 맵리듀스 : 문제를 쉽게 병렬화할 수 있게 나눈 후, 장비 클러스터 전체에서 이들을 조정하는 계산 패러다임이다. 하둡은 분석을 병렬로 수행할 수 있도록 나눠주며, HDFS는 많은 디스크에 흩어져 있는 데이터를 병렬로 읽는다. 문제는 어렵고, 느릴 수 있다는 것이다. 긴 배치 잡이 완전히 끝날 때까지 수 분 또는 수 시간을 기다려야 하므로 대화형 스타일 분석에 부적합하다. 
현재 빅쿼리엔진인 드레멜은 빅데이터 구조의 스토리지에 전통적인 SQL 쿼리 인터페이스를 추가하여 SQL 실행을 수천개의 장비로 병렬화 할 수 있다.
```